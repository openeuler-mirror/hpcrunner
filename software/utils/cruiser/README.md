# cruiser

### 项目介绍

Cruiser是一款自动化精度分析工具。能够针对所提供的源码进行半自动化差异源分析，定位到函数级差异源码。大幅降低精度分析难度。

### 现行版本

1.2.0

### 二进制地址

[cruiser.exe](https://gitee.com/kirky_x/kuneng-hpc-bin/tree/master/cruiser)

### 使用说明

Cruiser仅支持命令行方式进行使用，支持选项参数和配置文件两种配置输出方式进行使用。工具默认运行方式：参数选项方式。

#### 参数选项方式

```shell
./cruiser.exe [options]
```

#### 配置文件方式

```shell
./cruiser.exe --config config.ini
```

### 选项支持

| 选项               | 说明                                                         | 默认值                                |
| ------------------ | ------------------------------------------------------------ | ------------------------------------- |
| --config           | 指定使用配置文件对工具进行配置初始化。此选项具有排他性，使用后其他选项均失效。 | -                                     |
| --root             | 指定源码目录                                                 | 默认程序运行路径                      |
| --log-arm          | 指定arm平台运行所生成日志的路径                              | 默认程序运行路径下名为‘arm.log’的文件 |
| --log-x86          | 指定x86平台运行所生成日志的路径                              | 默认程序运行路径下名为‘x86.log’的文件 |
| --log              | 指定cruiser日志输出的路径                                    | 默认程序运行路径下名为‘log’的文件夹   |
| --log-mode         | 指定日志输出的模式。支持：<br>**ALL（全量模式）**：将使用所有支持的模式。<br/>**STANDARD（标准输出模式）**：指定将工具的日志输出到标准输出上。<br/>**FILE（文本文件模式）**：指定将工具的日志以文本文件的形式输出到log指定的目录当中。 | ALL（不区分大小写）                   |
| --hook-granularity | 指定插桩的粒度。支持：<br/>**ALL（全量模式）**：使用在MPI使能场景，将带进程号打印所有进程中插桩标记的变量的md5值。<br/>**MASTER（主进程模式）**：使用在MPI使能场景，将只打印主进程中插桩标记的变量的md5值。<br/>**SINGLE（单进程模式）**：使用在非MPI使能场景，将打印该执行进程中插桩标记的变量的md5值。注意：在MPI使能场景下，将不带ramk号打印所有标记的变量的md5值。 | MASTER（不区分大小写）                |
| --hook-style       | 指定接口的风格。目前支持：INC，NATIVE。<br/>**INC**：头文件样式，需要与dump_hook_xxx.inc匹配才能使用。<br/>**NATIVE**：原生风格，c接口形式。 | NATIVE                                |
| --hook-level       | 指定向下递归插桩函数的层级数，在HOOK.mode为主时生效。        | 5                                     |
| --hook-split       | 指定插桩过程中参数过长时的切割长度。                         | 2                                     |
| --hook-main        | 指定主函数模式下，主函数位置，以(文件路径，[类名.]函数名)的格式，支持多个指定。 | -                                     |
| --filter-path      | 索引时要跳过的路径。                                         | -                                     |
| --filter-file      | 索引时要跳过的文件。                                         |                                       |
| --help             | 获取选项信息。                                               | -                                     |

### 注意事项

目前插装时会自动将结构体一同插入输出桩，需手动进行删除。

