[SERVER]
11.11.11.11

[DOWNLOAD]
NCO/5.1.4 https://sourceforge.net/projects/nco/files/nco-5.1.4.tar.gz

[DEPENDENCY]
set -e
set -x

module purge
./jarvis -install bisheng/2.3.0 com
module use ./software/modulefiles
module load bisheng/2.3.0
export CC=`which clang`
export CXX=`which clang++`
export FC=`which flang`
./jarvis -install libjpeg/v9b bisheng
./jarvis -install hmpi/1.2.0 bisheng
module load libjpeg/v9b
module load hmpi/1.2.0
./jarvis -install hdf5/1.12.0/clang bisheng
module load hdf5-clang/1.12.0
./jarvis -install hdf4/4.2.13 bisheng
module load hdf4/4.2.13
./jarvis -install pnetcdf/1.12.1 bisheng
module load pnetcdf/1.12.1
./jarvis -install gsl/2.6 bisheng
module load gsl/2.6
./jarvis -install antlr/2.7.7 bisheng
module load antlr/2.7.7
./jarvis -install udunits/2.2.28 bisheng
module load udunits/2.2.28
./jarvis -install netcdf/4.7.4/clang clang+mpi
module use ./software/moduledeps/bisheng2.3.0-hmpi1.2.0
module load netcdf-clang/4.7.4


[ENV]
module purge
module use ./software/modulefiles
module load bisheng/2.3.0
export CC=`which clang`
export CXX=`which clang++`
export FC=`which flang`
module load libjpeg/v9b
module load hmpi/1.2.0
module load hdf5-clang/1.12.0
module load hdf4/4.2.13
module load pnetcdf/1.12.1
module load gsl/2.6
module load antlr/2.7.7
module load udunits/2.2.28
module use ./software/moduledeps/bisheng2.3.0-hmpi1.2.0
module load netcdf-clang/4.7.4



[APP]
app_name = NCO
build_dir = ${JARVIS_TMP}/
binary_dir = ${JARVIS_LIBS}/bisheng2.3.0/nco/bin
case_dir = ${JARVIS_LIBS}/bisheng2.3.0/nco/bin

[BUILD]
cd ${JARVIS_TMP}
rm -rf nco-5.1.4

tar zxvf ${JARVIS_DOWNLOAD}/nco-5.1.4.tar.gz
cd nco-5.1.4
echo ${UDUNITS_PATH}
export NETCDF_INC=${NETCDF_CLANG_PATH}/include
export NETCDF_LIB=${NETCDF_CLANG_PATH}/lib
./configure CPPFLAGS="-I${ANTLR_PATH}/include -I${UDUNITS_PATH}/include" CFLAGS="-L${ANTLR_PATH}/lib -I${NETCDF_CLANG_PATH}/include -I${UDUNITS_PATH}/include -L${UDUNITS_PATH}/lib " --prefix=${JARVIS_LIBS}/bisheng2.3.0/nco
make
make install

[RUN]
run =  ./ncap2 -v
binary = 
nodes = 1

