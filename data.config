[SERVER]
11.11.11.11

[DOWNLOAD]
qe/6.4 $JARVIS_PROXY/QEF/q-e/archive/refs/tags/qe-6.4.1.tar.gz q-e-qe-6.4.1.tar.gz

[DEPENDENCY]
set -e
set -x
module purge
module use ./share/software/modulefile/modules
./jarvis -install bisheng/2.4.0 com
module load bisheng/2.4.0
./jarvis -install openmpi/4.1.2 bisheng
module load openmpi/4.1.2-bisheng2.4.0
[ ! -d q-e-qe-6.4.1 ] && tar -xzvf ${JARVIS_DOWNLOAD}/q-e-qe-6.4.1.tar.gz

[ENV]
module purge
module use ./share/software/modulefile/modules
module load bisheng/2.4.0
module load openmpi/4.1.2-bisheng2.4.0

[APP]
app_name = QE
app_version = 6.4.1
compiler = bisheng+mpi
build_dir = ${JARVIS_ROOT}/q-e-qe-6.4.1/
binary_dir = ${JARVIS_ROOT}/q-e-qe-6.4.1/bin/
case_dir = ${JARVIS_ROOT}/workloads/QE/qe-test

[BUILD]
./configure F90=flang F77=flang MPIF90=mpifort MPIF77=mpifort CC=mpicc FCFLAGS="-O3" CFLAGS="-O3" --with-scalapack=no --enable-openmp --prefix=$1
make -j pw
make install

[CLEAN]
make clean

[RUN]
run = mpirun --allow-run-as-root -x OMP_NUM_THREADS=1 -np 8
binary = pw.x -input test_3.in
nodes = 1

[PERF]
perf= 
nsys=
ncu=--target-processes all
